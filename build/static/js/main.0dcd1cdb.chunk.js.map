{"version":3,"sources":["components/PersonForm.js","components/Filter.js","services/phone.js","components/SinglePerson.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","props","addPerson","handleNameChange","handleNumberChange","onSubmit","onChange","type","Filter","handleSearch","baseUrl","SinglePerson","persons","per","setPersons","setErrorMessage","setError","name","number","onClick","id","window","confirm","axios","delete","then","response","data","newPersons","filter","man","setTimeout","catch","error","Persons","search","toLowerCase","indexOf","map","i","key","Notification","message","className","App","useState","newName","setNewName","newNumber","setNewNumber","setSearch","errorMessage","useEffect","console","log","get","event","target","value","preventDefault","newObject","result","find","undefined","post","concat","doc","DOMParser","parseFromString","JSON","stringify","updated","put","update","alert","ReactDOM","render","document","getElementById"],"mappings":"0NAmBeA,MAjBf,YAA8B,IAATC,EAAQ,EAARA,MACVC,EAAmDD,EAAnDC,UAAWC,EAAwCF,EAAxCE,iBAAkBC,EAAsBH,EAAtBG,mBACpC,OACI,0BAAMC,SAAUH,GAChB,sCACQ,2BAAOI,SAAUH,KAEzB,wCACU,2BAAOG,SAAUF,KAE3B,6BACE,4BAAQG,KAAK,UAAb,UCFKC,MATf,YAA0B,IACfC,EADc,EAARR,MACNQ,aACP,OACI,mDACmB,2BAAOH,SAAUG,M,gBCLtCC,EAAU,eC0CDC,MArCf,YAAgC,IAATV,EAAQ,EAARA,MACZW,EAAuDX,EAAvDW,QAASC,EAA8CZ,EAA9CY,IAAKC,EAAyCb,EAAzCa,WAAYC,EAA6Bd,EAA7Bc,gBAAiBC,EAAYf,EAAZe,SA8BlD,OACQ,6BAAOH,EAAII,KAAMJ,EAAIK,OAArB,IAA6B,4BAAQC,QA3BxB,WDOV,IAACC,ECNZC,OAAOC,QAAP,iBAAyBT,EAAII,KAA7B,QDMYG,ECLGP,EAAIO,GDMHG,IAAMC,OAAN,UAAgBd,EAAhB,YAA2BU,IAC5BK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCPlBF,MAAK,SAAAC,GACpB,IAAME,EAAahB,EAAQiB,QAAO,SAAAC,GAAG,OAAIA,EAAIV,KAAOP,EAAIO,MACxDJ,GAAS,GACTD,EAAgB,WAAD,OAEAF,EAAII,OAEjBc,YAAW,WACThB,EAAgB,QACf,KACLD,EAAWc,MACZI,OAAO,SAAAC,GACLlB,EAAgB,kBAAD,OAEMF,EAAII,KAFV,8CAIdD,GAAS,GACTe,YAAW,WACThB,EAAgB,QACf,UAMwB,YAA7B,MCpBGmB,MAdf,YAA2B,IAATjC,EAAQ,EAARA,MACPa,EAA0Db,EAA1Da,WAAYF,EAA8CX,EAA9CW,QAASuB,EAAqClC,EAArCkC,OAAQpB,EAA6Bd,EAA7Bc,gBAAiBC,EAAYf,EAAZe,SAIrD,OACI,6BAEEJ,EAAQiB,QAAO,SAAAhB,GAAG,OAA8D,IAA1DA,EAAII,KAAKmB,cAAcC,QAAQF,EAAOC,kBAAuBE,KAAI,SAACzB,EAAK0B,GAAN,OAAY,kBAAE,EAAF,CAAeC,IAAKD,EAAGtC,MAAO,CAACY,MAAKD,UAASE,aAAYC,kBAAiBC,mBCCxKyB,MAXf,YAAyC,IAAlBC,EAAiB,EAAjBA,QAAST,EAAQ,EAARA,MAC5B,OAAgB,OAAZS,EACO,KAGP,yBAAKC,UAAYV,EAAQ,QAAS,SAC7BS,IC8GEE,EA7GH,WAAO,IAAD,EAEgBC,mBAAS,IAFzB,mBAERC,EAFQ,KAECC,EAFD,OAGoBF,mBAAS,IAH7B,mBAGRG,EAHQ,KAGGC,EAHH,OAIYJ,mBAAS,IAJrB,mBAITV,EAJS,KAIDe,EAJC,OAKcL,mBAAS,IALvB,mBAKTjC,EALS,KAKAE,EALA,OAMwB+B,mBAAS,MANjC,mBAMTM,EANS,KAMKpC,EANL,OAOU8B,oBAAS,GAPnB,mBAOTZ,EAPS,KAOFjB,EAPE,KAUhBoC,qBAAU,WACRC,QAAQC,IAAI,UJhBI/B,IAAMgC,IAAI7C,GACXe,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QIiBxCF,MAAK,SAAAC,GACJ2B,QAAQC,IAAI,qBACZxC,EAAWY,QAIZ,IA6EH,OACE,6BACE,kBAAC,EAAD,CAAcgB,QAASS,EAAclB,MAAOA,IAC5C,yCACA,kBAAC,EAAD,CAAQhC,MAAO,CAACQ,aAtEC,SAAC+C,GAClBN,EAAUM,EAAMC,OAAOC,WAsExB,yCACC,kBAAC,EAAD,CAAYzD,MAAO,CAACC,UApEN,SAACsD,GACjBA,EAAMG,iBACN,IJrCYC,EIqCNC,EAASjD,EAAQkD,MAAK,SAAAjD,GAAG,OAAIA,EAAII,OAAS6B,KAChD,QAAciB,IAAXF,GJtCSD,EIuCU,CACd3C,KAAM6B,EACN5B,OAAQ8B,GJxCAzB,IAAMyC,KAAKtD,EAASkD,GACrBnC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SI0CpCF,MAAK,SAAAC,GACJZ,EAAWF,EAAQqD,OAAOvC,IAC1BV,GAAS,GACTD,EAAgB,SAAD,OACNW,EAAST,UAGnBe,OAAM,SAAAC,GACL,IAAIiC,GAAM,IAAIC,WAAYC,gBAAgBnC,EAAMP,SAASC,KAAM,YAC/D0B,QAAQC,IAAI,MAAOrB,EAAMP,SAASC,MAClC0B,QAAQC,IAAI,MAAOY,GACnBnD,EAAgBsD,KAAKC,UAAUrC,EAAMP,SAASC,OAE9CX,GAAS,MAIXe,YAAW,WACThB,EAAgB,QACf,UAEE,GAAI8C,GAAUb,EAAW,CAC9B,IAAMuB,EAAO,2BACRV,GADQ,IAEX3C,OAAQ8B,IAGV3B,OAAOC,QAAP,UAAkBwB,EAAlB,8EJlEO,SAAC1B,EAAIwC,GAEhB,OADgBrC,IAAMiD,IAAN,UAAa9D,EAAb,YAAwBU,GAAMwC,GAC/BnC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QIiErC8C,CAAOZ,EAAOzC,GAAImD,GAAS9C,MAAK,SAAAC,GAC9BZ,EAAWF,EAAQ0B,KAAI,SAAAR,GAAG,OAAIA,EAAIV,KAAOyC,EAAOzC,GAAKU,EAAMyC,MAC3DvD,GAAS,GACTD,EAAgB,WAAD,OAEJW,EAAST,KAFL,iBAIde,OAAM,SAAAC,GACPjB,GAAS,GACTD,EAAgBsD,KAAKC,UAAUrC,EAAMP,SAASC,UAIhDI,YAAW,WACThB,EAAgB,QACf,UAID2D,MAAM,GAAD,OAAI5B,EAAJ,kCAYsB3C,iBAjFV,SAACqD,GACtBT,EAAWS,EAAMC,OAAOC,QAgFyBtD,mBA5E1B,SAACoD,GACxBP,EAAaO,EAAMC,OAAOC,WA4E1B,uCACA,kBAAC,EAAD,CAASzD,MAAO,CAACa,aAAYF,UAASuB,SAAQpB,kBAAiBC,gB,MC1GrE2D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.0dcd1cdb.chunk.js","sourcesContent":["import React from 'react'\n\nfunction PersonForm({props}) {\n    const {addPerson, handleNameChange, handleNumberChange} = props\n    return (\n        <form onSubmit={addPerson}>\n        <div>\n          name: <input onChange={handleNameChange}/>\n        </div>\n        <div>\n          number: <input onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nfunction Filter({props}) {\n    const {handleSearch} = props\n    return (\n        <div>\n        filter shown with: <input onChange={handleSearch}/>\n      </div>\n    )\n}\n\nexport default Filter\n","import axios from 'axios'\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n    \n}\n\nexport {getAll, create, update, remove}","import React, {useEffect} from 'react'\nimport {remove, getAll} from '../services/phone'\n\n\n\n\nfunction SinglePerson({props}) {\n    const {persons, per, setPersons, setErrorMessage, setError} = props;\n\n    \n\n    const handleChange = () => {\n    window.confirm(`Delete ${per.name}?`)\n         && remove(per.id).then(response => {\n            const newPersons = persons.filter(man => man.id !== per.id)\n            setError(false)\n            setErrorMessage(\n                \n                `Deleted ${per.name}`\n              )\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            setPersons(newPersons)\n        }).catch( error =>\n            {setErrorMessage(\n                \n                `Information of ${per.name} has already been removed from the server`\n              )\n              setError(true)\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            })\n        \n    }\n\n    return (\n            <div >{per.name}{per.number} <button onClick={handleChange}> delete </button> </div>\n       \n    )\n}\n\nexport default SinglePerson\n","import React from 'react'\nimport SinglePerson from './SinglePerson'\n\n\nfunction Persons({props}) {\n    const {setPersons, persons, search, setErrorMessage, setError} = props\n\n    \n\n    return (\n        <div>\n            {\n          persons.filter(per => per.name.toLowerCase().indexOf(search.toLowerCase()) !== -1).map((per, i) => < SinglePerson key={i} props={{per, persons, setPersons, setErrorMessage, setError}}/>)\n      }\n        </div>\n    )\n}\n\nexport default Persons\n","import React from 'react'\n\nfunction Notification({message, error}) {\n    if (message === null) {\n        return null\n    }\n    return (\n        <div className={ error ? \"error\": \"alert\"}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification\n","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport {getAll, create, update, remove} from './services/phone'\n\n// Objects are not valid as a React child (found: object with keys {data, status, statusText, headers, config, request}).\n\nconst App = () => {\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [search, setSearch] = useState('')\n  const [persons, setPersons] = useState([])\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [error, setError] = useState(false)\n\n\n  useEffect(() => {\n    console.log('effect')\n    getAll()\n    .then(response => {\n      console.log('promise fulfilled')\n      setPersons(response)\n    })\n\n\n  }, [])\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value)\n      \n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n      setSearch(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const result = persons.find(per => per.name === newName)\n    if(result === undefined){\n        const newPerson = {\n            name: newName,\n            number: newNumber\n        }\n        create(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setError(false)\n          setErrorMessage(\n          `Added ${response.name}`)\n          //setNewName('') \n        })\n        .catch(error => {\n          var doc = new DOMParser().parseFromString(error.response.data, \"text/xml\");\n          console.log('err', error.response.data)\n          console.log('dom', doc)\n          setErrorMessage(JSON.stringify(error.response.data))\n          //setErrorMessage(error.response.data.error)\n          setError(true)\n        })\n        \n        \n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n\n      } else if (result && newNumber) {\n        const updated = {\n          ...result,\n          number: newNumber\n        }\n\n        window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`) &&\n        update(result.id, updated).then(response => {\n          setPersons(persons.map(man => man.id !== result.id ? man : updated ))\n          setError(false)\n          setErrorMessage(\n          \n          `updated ${response.name}'s number`\n        )\n        }).catch(error => {\n          setError(true)\n          setErrorMessage(JSON.stringify(error.response.data))\n          //setErrorMessage(error.response.data.error)\n        })\n        \n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      }\n      \n      else {\n          alert(`${newName} is already in the phonebook`)\n      }\n\n  }\n\n\n  return (\n    <div>\n      <Notification message={errorMessage} error={error}/>\n      <h2>Phonebook</h2>\n      <Filter props={{handleSearch}}/>\n     <h2>add a new</h2>\n      <PersonForm props={{addPerson, handleNameChange, handleNumberChange}}/>\n      <h2>Numbers</h2>\n      <Persons props={{setPersons, persons, search, setErrorMessage, setError}}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './styles.css'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}